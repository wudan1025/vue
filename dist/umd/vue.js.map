{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/util.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["// 拿到原型上的方法\nlet oldArrayProtoMethods = Array.prototype\n\n// 继承 原本的原型\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\n\nlet methods = [\n    'push', 'pop', 'shift', 'unshift', 'reverse', 'sort', 'splice'\n]\n\nmethods.forEach(method => {\n    // 重写 原型上的这些方法\n    arrayMethods[method] = function (...args) {\n        // 使用 ...args 将 arguments伪数组 转为 真正的数组\n        const result = oldArrayProtoMethods[method].apply(this, args)\n        let inserted;\n        let ob = this.__ob__\n        switch (method) {\n            case 'push':\n            case 'unshoft':\n                inserted = args\n                break;\n            case 'splice':\n                inserted = args.slice(2); // 第三个参数为新增\n            default:\n                break;\n        }\n        // 对于新增的数据 做双向绑定\n        if (inserted) ob.observeArray(inserted)\n        return result\n    }\n})\n","export function defineProperty(target, key, value) {\n    Object.defineProperty(target, key, {\n        enumerable: false, // 不能被枚举，不能被循环出来 ?\n        configurable: false,\n        value\n    })\n}\n\nexport function proxy(vm, data, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            console.log('get')\n            return vm[data][key];\n        },\n        set(newvalue) {\n            console.log('set')\n            vm[data][key] = newvalue\n        }\n    })\n}\n\nexport const LIFECYCLE_HOOKS = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestroy',\n    'destroyed'\n];\n\nconst strats = {};\nstrats.data = function (parentVal, childValue) {\n    return childValue; // 这里应该有合并data的策略\n}\n\nfunction mergeHook(parentVal, childValue) { // 生命周期的合并\n    if (childValue) {\n        if (parentVal) {\n            return parentVal.concat(childValue); // 爸爸和儿子进行拼接\n        } else {\n            return [childValue]; //儿子需要转化成数组\n        }\n    } else {\n        return parentVal; // 不合并了 采用父亲的\n    }\n}\n\nLIFECYCLE_HOOKS.forEach(hook => {\n    strats[hook] = mergeHook\n})\n\n\n\nexport function mergeOptions(parent, child) {\n    // 遍历父亲 ，可能是父亲有 儿子没有 \n    const options = {};\n    for (let key in parent) { // 父亲和儿子都有在这就处理了\n        mergeField(key);\n    }\n    // 儿子有父亲没有 在这处理\n    for (let key in child) { // 将儿子多的赋予到父亲上\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key);\n        }\n    }\n\n    function mergeField(key) { // 合并字段\n        // 根据key 不同的策略来进行合并 \n        if (strats[key]) {\n            options[key] = strats[key](parent[key], child[key]);\n        } else {\n            // todo默认合并\n            options[key] = child[key]\n        }\n    }\n\n    console.log(options)\n    return options;\n}","import { arrayMethods } from './array'\nimport { defineProperty } from \"../util\";\nclass Observer {\n    constructor(value) {\n        // 通过使用__ob__判断元素是否 被监听过\n        defineProperty(value, '__ob__', this);\n        // 数组监听\n        if (Array.isArray(value)) {\n            // 重新定义原型上的方法\n            value.__proto__ = arrayMethods;\n            // 数组中还有对象的情况\n            this.observeArray(value)\n        } else {\n            // 对象监听\n            this.walk(value)\n        }\n    }\n\n    observeArray(value) {\n        value.forEach(item => {\n            observe(item) // 监听数组中内容\n        })\n    }\n\n\n\n    walk(data) {\n        let keys = Object.keys(data)\n        keys.forEach(key => {\n            defineReactive(data, key, data[key])\n        })\n    }\n\n\n}\n\nfunction defineReactive(data, key, value) {\n    observe(value) // 如果当前对象内还有对象，会递归调用 整个过程\n    Object.defineProperty(data, key, {\n        get() {\n            // console.log('get')\n            return value\n        },\n        set(newValue) {\n            if (newValue == value) return\n            observe(newValue) // 如果 set 的数据中还有 obj 继续进行监听\n            value = newValue\n            // console.log('set')\n        }\n    })\n}\n\nexport function observe(data) {\n    // 只对 object 类型数据监听，简单类型不进行监听\n    if (typeof data != 'object' || data == null) {\n        return data\n    }\n\n    // __ob__ 表示当前数据是否已被监听过\n    if (data.__ob__) {\n        return data\n    }\n\n    return new Observer(data)\n}","import { observe } from './observer/index'\nimport { proxy } from './util.js'\n\nexport function initState(vm) { // vm.$options\n    const opts = vm.$options;\n    if (opts.props) {\n        initProps(vm);\n    }\n    if (opts.methods) {\n        initMethods(vm);\n    }\n    if (opts.data) {\n        initData(vm);\n    }\n    if (opts.computed) {\n        initComputed(vm);\n    }\n    if (opts.watch) {\n        initWatch(vm);\n    }\n}\n\nfunction initProps() { }\nfunction initMethods() { }\n\nfunction initData(vm) { // 数据的初始化操作\n    let data = vm.$options.data;\n    // 代理  保存数据 所有 data\n    vm._data = data = typeof data == 'function' ? data.call(vm) : data;\n    // // 数据的劫持方案 对象Object.defineProperty\n    // // 数组 单独处理的\n\n    // // 当我去vm上取属性时 ，帮我将属性的取值代理到vm._data上\n    for (let key in data) {\n        proxy(vm, '_data', key);\n    }\n    observe(data);\n}\nfunction initComputed() { }\nfunction initWatch() { }\n\nexport function stateMixin(Vue) {\n    Vue.prototype.$nextTick = function (cb) {\n        nextTick(cb);\n    }\n    Vue.prototype.$watch = function (exprOrFn, cb, options = {}) {\n        // 数据应该依赖这个watcher  数据变化后应该让watcher从新执行\n        let watcher = new Watcher(this, exprOrFn, cb, { ...options, user: true });\n        if (options.immediate) {\n            cb(); // 如果是immdiate应该立刻执行\n        }\n    }\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获 匹配 但是不在捕获结果组中\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // </my:xx>\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的    aaa=\"aaa\"  a='aaa'   a=aaa\n// const attribute = /^\\s*([^\\s\"'<>\\/=]+)(\\s*(=)\\s*(\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的  测试用 展示所有捕获组\n\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >    >   <div></div>  <br/>\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\n// 数据结构 树、栈、链表、队列、\nexport function parseHTML(html) {\n    function createASTElement(tagName, attrs) {\n        return {\n            tag: tagName, // 标签名\n            type: 1, // 元素类型\n            children: [], // 孩子列表\n            attrs, // 属性集合\n            parent: null // 父元素\n        }\n    }\n    let root;\n    let currentParent;\n    let stack = [];\n    function start(tagName, attrs) { // 创建一个元素 作为根元素\n        let element = createASTElement(tagName, attrs);\n        if (!root) {\n            root = element;\n        }\n        currentParent = element; // 当前解析的标签 保存起来\n        stack.push(element); // 将生产的ast元素放到栈中\n    }\n\n    // <div> <p></p> hello</div>    currentParent=p\n    function end(tagName) { // 在结尾标签处 创建父子关系\n        let element = stack.pop(); // 取出栈中的最后一个\n        currentParent = stack[stack.length - 1];\n        if (currentParent) { // 在闭合时可以知道这个标签的父亲是谁\n            element.parent = currentParent;\n            currentParent.children.push(element);\n        }\n    }\n    function chars(text) {\n        text = text.trim();\n        if (text) {\n            currentParent.children.push({\n                type: 3,\n                text\n            })\n        }\n    }\n\n    while (html) { // 只要html不为空字符串就一直解析\n        // console.log(html)\n        let textEnd = html.indexOf('<');\n        // console.log(textEnd)\n        if (textEnd == 0) {\n            // 肯定是标签\n            const startTagMatch = parseStartTag(); // 开始标签匹配的结果 处理开始\n\n            // 得到结果 当前标签\n            // attrs: Array(2)\n            // 0: { name: \"id\", value: \"app\" }\n            // 1: { name: \"style\", value: \"color:red\" }\n            // length: 2\n            // tagName: \"div\"\n\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs);\n                continue;\n            }\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) { // 处理结束标签\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]); // 将结束标签传入 \n                continue;\n            }\n        }\n        let text;\n        if (textEnd > 0) { // 当前下来标识为文本 截取文本 是处理文本\n            text = html.substring(0, textEnd)\n        }\n        if (text) { //  处理文本 删除文本\n            advance(text.length);\n            chars(text);\n        }\n\n    }\n\n    function advance(n) { // 将字符串进行截取操作 在更新html内容\n        html = html.substring(n)\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length); // 删除开始标签\n            // 如果直接是闭合标签了 说明没有属性\n            let end, attr;\n            // 不是结尾标签 能匹配到属性\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                // console.log(attr)\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n                advance(attr[0].length); // 去掉当前属性\n            }\n            if (end) { // >  删除匹配到的结束标签\n                advance(end[0].length);\n                return match;\n            }\n        }\n    }\n\n    return root;\n}","// 编写<div id=\"app\" style=\"color:red\"> hello {{name}} <span>hello</span></div>\n\n// _c 生成节点\n// _v 虚拟dom\n// 结果:render(){\n//    return _c('div',{id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('span',null,_v('hello')))\n//}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n//  语法层面的转义\nfunction genProps(attrs) { //  id   \"app\"     / style  \"fontSize:12px;color:red\"\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {}; // 对样式进行特殊的处理 \n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\n    }\n    return `{${str.slice(0, -1)}}`;\n}\nfunction gen(node) {\n    if (node.type == 1) {\n        return generate(node); // 生产元素节点的字符串\n    } else {\n        let text = node.text; // 获取文本\n\n        // 如果是普通文本 不带{{}}\n        if (!defaultTagRE.test(text)) {\n            return `_v(${JSON.stringify(text)})` // _v('hello {{ name }} world {{msg}} aa')   => _v('hello'+_s(name) +'world' + _s(msg))\n        }\n\n        // 带 {{}} 情况\n        let tokens = []; // 存放每一段的代码\n        // 修改正则匹配后的索引\n        let lastIndex = defaultTagRE.lastIndex = 0; // 如果正则是全局模式 需要每次使用前置为0\n        let match, index; // 每次匹配到的结果\n\n        while (match = defaultTagRE.exec(text)) {\n            // console.log(match)\n            index = match.index; // 保存匹配到的索引\n            // console.log(index)\n            if (index > lastIndex) {\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index + match[0].length;\n        }\n        if (lastIndex < text.length) {\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}\nfunction genChildren(el) {\n    const children = el.children;\n    if (children) { // 将所有转化后的儿子用逗号拼接起来\n        return children.map(child => gen(child)).join(',')\n    }\n}\nexport function generate(el) {\n    let children = genChildren(el);// 儿子的生成\n    let code = `_c('${el.tag}',${\n        el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'\n        }${\n        children ? `,${children}` : ''\n        })`;\n    // console.log(code)\n    return code;\n}","import { parseHTML } from \"./parse\";\nimport { generate } from \"./generate\";\n\n\nexport function compileToFunctions(template) {\n    // debugger\n    // 生成 ast 树\n    let ast = parseHTML(template)\n\n    // 通过 ast 树生成代码\n    let code = generate(ast)\n    // console.log(code)\n\n    // 4.将字符串变成函数 限制取值范围 通过with来进行取值 \n    // 稍后调用render函数就可以通过改变this 让这个函数内部取到结果了\n    // 改变 this 指向\n    let render = new Function(`with(this){return ${code}}`);\n\n    return render;\n\n}","export function patch(oldVnode, vnode) {\n    // 将虚拟节点转化成真实节点\n    let el = createElm(vnode); // 产生真实的dom \n    let parentElm = oldVnode.parentNode; // 获取老的app的父亲 =》 body\n    parentElm.insertBefore(el, oldVnode.nextSibling); // 当前的真实元素插入到app的后面\n    parentElm.removeChild(oldVnode); // 删除老的节点\n}\n\nfunction createElm(vnode) {\n    let { tag, children, key, data, text } = vnode;\n    // 如果是元素\n    if (typeof tag == 'string') { // 创建元素 放到vnode.el上\n        vnode.el = document.createElement(tag);\n        // 只有元素才有属性\n        updateProperties(vnode);\n\n        children.forEach(child => { // 遍历儿子 将儿子渲染后的结果扔到父亲中\n            vnode.el.appendChild(createElm(child));\n        })\n    } else { // 创建文本 放到vnode.el上\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;\n}\n\n// vue 的渲染流程 =》 先初始化数据 =》 将模板进行编译 =》 render函数 =》 生成虚拟节点 =》 生成真实的dom  =》 扔到页面上\n\nfunction updateProperties(vnode) {\n    let el = vnode.el;\n    let newProps = vnode.data || {};\n    for (let key in newProps) {\n        if (key == 'style') { // {color:red}\n            for (let styleName in newProps.style) {\n                el.style[styleName] = newProps.style[styleName]\n            }\n        } else if (key == 'class') {\n            el.className = el.class;\n        } else {\n            el.setAttribute(key, newProps[key]);\n        }\n    }\n}","import { patch } from \"./vdom/patch\";\n\nexport function lifecycleMixin(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this;\n        // console.log(vm.$el)\n        patch(vm.$el, vnode)\n    }\n}\n\n\nexport function mountComponent(vm, el) {\n    // 调用render方法去渲染 el属性\n    // 先调用render方法创建虚拟节点，在将虚拟节点渲染到页面上\n    vm._update(vm._render());\n}","import { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index\";\nimport { mountComponent } from \"./lifecycle\";\nimport { mergeOptions } from \"./util\";\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        // this 指向 new 出来的实例\n        const vm = this;\n\n        // 需要将用户自定义的options 和全局的options做合并\n        // 子类 或者 vue 会调用 所以使用  constructor 调用\n\n        vm.$options = mergeOptions(vm.constructor.options, options);\n\n        initState(vm); // 初始化属性\n\n        if (vm.$options.el) { // 挂载逻辑\n            vm.$mount(vm.$options.el)\n        }\n    }\n\n    Vue.prototype.$mount = function (el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el)\n        vm.$el = el\n\n        if (!options.render) {\n            // 没有render 将 template 转化为render\n            let template = options.template\n            if (!template && el) {\n                // 没有 template 将给定el 作为 template\n                template = el.outerHTML\n            }\n            // 将 dom 字符串 编译为render 函数\n            const render = compileToFunctions(template)\n            // console.log(render)\n            options.render = render\n        }\n\n        mountComponent(vm, el)\n\n    }\n}","export function renderMixin(Vue) {\n    // 用对象来描述dom的解构 虚拟节点\n    Vue.prototype._c = function () { // 创建虚拟dom元素\n        return createElement(...arguments);\n    }\n    Vue.prototype._s = function (val) { // stringify 表示对象 将对象展示为 string 字符串输出\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\n    }\n    Vue.prototype._v = function (text) { // 创建虚拟dom文本元素\n        return createTextVnode(text);\n    }\n    Vue.prototype._render = function () { // _render = render\n        const vm = this;\n        // ?\n        const render = vm.$options.render;\n        // console.log(render())\n        let vnode = render.call(vm);\n        // console.log(vnode);\n        // debugger\n        return vnode;\n    }\n}\n// _c('div',{},_v(),_c())\nfunction createElement(tag, data = {}, ...children) {\n    return vnode(tag, data, data.key, children)\n}\nfunction createTextVnode(text) {\n    return vnode(undefined, undefined, undefined, undefined, text);\n}\n// 用来产生虚拟dom的\nfunction vnode(tag, data, key, children, text) {\n    return {\n        tag,\n        data,\n        key,\n        children,\n        text\n    }\n}\n","import { mergeOptions } from \"../util\";\n\nexport function initGlobalApi(Vue) {\n    Vue.options = {}; // Vue.components Vue.diretive \n    Vue.mixin = function (mixin) {\n        // 合并对象  （我先考虑生命周期） 不考虑其他的合并 data computed watch\n        this.options = mergeOptions(this.options, mixin);\n    }\n\n    // Vue.options, options\n    // 用户 new Vue({created(){}})\n}","import { initMixin } from './init'\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./vdom/index\";\nimport { initGlobalApi } from './global-api/index'\nimport { stateMixin } from './state'\n\n\n\nfunction Vue(options) {\n    // 组件初始化入口\n    this._init(options)\n}\n\n// 写成插件对原型进行扩展\ninitMixin(Vue) // init\nlifecycleMixin(Vue); // 混合生命周期 渲染 _updata\nrenderMixin(Vue); // _render\n\nstateMixin(Vue);\n\n// 静态方法 Vue.component Vue.directive Vue.extend Vue.mixin ...\n\ninitGlobalApi(Vue);\n\nexport default Vue"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","defineProperty","target","key","value","enumerable","configurable","proxy","vm","data","get","console","log","set","newvalue","LIFECYCLE_HOOKS","strats","parentVal","childValue","mergeHook","concat","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","Observer","isArray","__proto__","walk","item","observe","keys","defineReactive","newValue","initState","opts","$options","props","initData","computed","watch","_data","call","stateMixin","Vue","$nextTick","cb","nextTick","$watch","exprOrFn","watcher","Watcher","user","immediate","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","attrs","tag","type","children","root","currentParent","stack","start","element","push","end","pop","length","chars","text","trim","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","i","obj","split","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","join","genChildren","el","map","code","compileToFunctions","template","ast","render","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","_update","$el","mountComponent","_render","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_s","val","_v","createTextVnode","undefined","initGlobalApi","mixin"],"mappings":"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"}