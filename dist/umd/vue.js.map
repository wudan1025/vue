{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/util.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/observer/watcher.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["// 拿到原型上的方法\nlet oldArrayProtoMethods = Array.prototype\n\n// 继承 原本的原型\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\n\nlet methods = [\n    'push', 'pop', 'shift', 'unshift', 'reverse', 'sort', 'splice'\n]\n\nmethods.forEach(method => {\n    // 重写 原型上的这些方法\n    arrayMethods[method] = function (...args) {\n        // 使用 ...args 将 arguments伪数组 转为 真正的数组\n        const result = oldArrayProtoMethods[method].apply(this, args)\n        let inserted;\n        let ob = this.__ob__\n        switch (method) {\n            case 'push':\n            case 'unshoft':\n                inserted = args\n                break;\n            case 'splice':\n                inserted = args.slice(2); // 第三个参数为新增\n            default:\n                break;\n        }\n        // 对于新增的数据 做双向绑定\n        if (inserted) ob.observeArray(inserted)\n        return result\n    }\n})\n","export function defineProperty(target, key, value) {\n    Object.defineProperty(target, key, {\n        enumerable: false, // 不能被枚举，不能被循环出来 ?\n        configurable: false,\n        value\n    })\n\n}\n\nexport function proxy(vm, data, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[data][key];\n        },\n        set(newvalue) {\n            vm[data][key] = newvalue\n        }\n    })\n}\n\nexport const LIFECYCLE_HOOKS = [\n    'beforeCreate',\n    'created',\n    'beforeMount',\n    'mounted',\n    'beforeUpdate',\n    'updated',\n    'beforeDestroy',\n    'destroyed'\n];\n\nconst strats = {};\nstrats.data = function (parentVal, childValue) {\n    return childValue; // 这里应该有合并data的策略\n}\n\nfunction mergeHook(parentVal, childValue) { // 生命周期的合并\n    if (childValue) {\n        if (parentVal) {\n            return parentVal.concat(childValue); // 爸爸和儿子进行拼接\n        } else {\n            return [childValue]; //儿子需要转化成数组\n        }\n    } else {\n        return parentVal; // 不合并了 采用父亲的\n    }\n}\n\nLIFECYCLE_HOOKS.forEach(hook => {\n    strats[hook] = mergeHook\n})\n\n\n\nexport function mergeOptions(parent, child) {\n    // 遍历父亲 ，可能是父亲有 儿子没有 \n    const options = {};\n    for (let key in parent) { // 父亲和儿子都有在这就处理了\n        mergeField(key);\n    }\n    // 儿子有父亲没有 在这处理\n    for (let key in child) { // 将儿子多的赋予到父亲上\n        if (!parent.hasOwnProperty(key)) {\n            mergeField(key);\n        }\n    }\n\n    function mergeField(key) { // 合并字段\n        // 根据key 不同的策略来进行合并 \n        if (strats[key]) {\n            options[key] = strats[key](parent[key], child[key]);\n        } else {\n            // todo默认合并\n            options[key] = child[key]\n        }\n    }\n\n    // console.log(options)\n    return options;\n}\n\nconst callbacks = [];\nlet pending = false;\nfunction flushCallbacks() {\n    while (callbacks.length) {\n        let cb = callbacks.shift();\n        cb();\n    } // 让nextTick中传入的方法依次执行\n    pending = false // 标识已经执行完毕\n}\nlet timerFunc;\nif (Promise) {\n    timerFunc = () => {\n        Promise.resolve().then(flushCallbacks); // 异步处理更新\n    }\n} else if (MutationObserver) { // 可以监控dom变化,监控完毕后是异步更新\n    let observe = new MutationObserver(flushCallbacks);\n    let textNode = document.createTextNode(1); // 先创建一个文本节点\n    observe.observe(textNode, { characterData: true }); // 观测文本节点中的内容\n    timerFunc = () => {\n        textNode.textContent = 2; // 文中的内容改成2\n    }\n} else if (setImmediate) {\n    timerFunc = () => {\n        setImmediate(flushCallbacks)\n    }\n} else {\n    timerFunc = () => {\n        setTimeout(flushCallbacks)\n    }\n}\nexport function nextTick(cb) { // 因为内部会调用nextTick 用户也会调用，但是异步只需要一次\n    callbacks.push(cb);\n    if (!pending) {\n        // vue3 里的nextTick原理就是promise.then 没有做兼容性处理了\n        timerFunc();// 这个方法是异步方法 做了兼容处理了\n        pending = true;\n    }\n}","let id = 0;\nclass Dep {\n    constructor() {\n        this.subs = [];\n        this.id = id++;\n    }\n    depend() {\n        // 我们希望 watcher 可以存放dep \n        // this 是 dep\n        // Dep.target 是 watch???\n        Dep.target.addDep(this); // 实现双向记忆的，让watcher记住dep的同时 ，让dep 也记住watcher\n        // this.subs.push(Dep.target);\n    }\n    addSub(watcher) {\n        this.subs.push(watcher);\n    }\n    notify() {\n        console.log(this.subs)\n        this.subs.forEach(watcher => watcher.update());\n    }\n}\nDep.target = null; // 静态属性 就一份\nexport function pushTarget(watcher) {\n    Dep.target = watcher;// 保留watcher\n}\n\nexport function popTarget() {\n    Dep.target = null; // 将变量删除掉\n}\nexport default Dep\n// 多对多的关系 一个属性有一个dep是用来收集watcher的\n// dep 可以存多个watcher    \n// 一个watcher可以对应多个dep ","import { arrayMethods } from './array'\nimport { defineProperty } from \"../util\";\nimport Dep from \"./dep\";\nclass Observer {\n    constructor(value) {\n        // 通过使用__ob__判断元素是否 被监听过\n        defineProperty(value, '__ob__', this);\n        // 数组监听\n        if (Array.isArray(value)) {\n            // 重新定义原型上的方法\n            value.__proto__ = arrayMethods;\n            // 数组中还有对象的情况\n            this.observeArray(value)\n        } else {\n            // 对象监听\n            this.walk(value)\n        }\n    }\n\n    observeArray(value) {\n        value.forEach(item => {\n            observe(item) // 监听数组中内容\n        })\n    }\n\n\n\n    walk(data) {\n        let keys = Object.keys(data)\n        keys.forEach(key => {\n            defineReactive(data, key, data[key])\n        })\n    }\n\n\n}\n\n\n// 封装 继承\nfunction defineReactive(data, key, value) {\n    // 获取到数组对应的dep\n    // 如果当前对象内还有对象，会递归调用 整个过程\n    let childDep = observe(value); // 如果值是对象类型在进行观测\n\n    let dep = new Dep(); // 每个属性都有一个dep \n    // 当页面取值时 说明这个值用来渲染了，将这个watcher和这个属性对应起来\n    Object.defineProperty(data, key, {\n        get() { // 依赖收集\n            // console.log('属性获取')\n            if (Dep.target) { // 让这个属性记住这个watcher\n                dep.depend();\n                if (childDep) { // 可能是数组可能是对象\n                    // 默认给数组增加了一个dep属性，当对数组这个对象取值的时候\n                    childDep.dep.depend(); // 数组存起来了这个渲染watcher\n                }\n            }\n            return value\n        },\n        set(newValue) { // 依赖更新\n            console.log('属性赋值')\n            if (newValue === value) return;\n            // 如果 set 的数据中还有 obj 继续进行监听\n            observe(newValue); // 如果用户将值改为对象继续监控\n            value = newValue;\n\n            dep.notify(); // 异步更新 防止频繁操作\n        }\n    });\n    // 数组的更新 去重  优化  组件渲染\n}\n\n\nexport function observe(data) {\n    // 只对 object 类型数据监听，简单类型不进行监听\n    if (typeof data != 'object' || data == null) {\n        return;\n    }\n\n    // __ob__ 表示当前数据是否已被监听过\n    if (data.__ob__) {\n        return data\n    }\n\n    return new Observer(data)\n}","import { observe } from './observer/index'\nimport { proxy, nextTick } from './util.js'\n\nexport function initState(vm) { // vm.$options\n    const opts = vm.$options;\n    if (opts.props) {\n        initProps(vm);\n    }\n    if (opts.methods) {\n        initMethods(vm);\n    }\n    if (opts.data) {\n        initData(vm);\n    }\n    if (opts.computed) {\n        initComputed(vm);\n    }\n    if (opts.watch) {\n        initWatch(vm);\n    }\n}\n\nfunction initProps() { }\nfunction initMethods() { }\n\nfunction initData(vm) { // 数据的初始化操作\n    let data = vm.$options.data;\n    // 代理  保存数据 所有 data\n    vm._data = data = typeof data == 'function' ? data.call(vm) : data;\n    // // 数据的劫持方案 对象Object.defineProperty\n    // // 数组 单独处理的\n\n    // // 当我去vm上取属性时 ，帮我将属性的取值代理到vm._data上\n    for (let key in data) {\n        proxy(vm, '_data', key);\n    }\n    observe(data);\n}\nfunction initComputed() { }\nfunction initWatch() { }\n\nexport function stateMixin(Vue) {\n    Vue.prototype.$nextTick = function (cb) {\n        nextTick(cb);\n    }\n    Vue.prototype.$watch = function (exprOrFn, cb, options = {}) {\n        // 数据应该依赖这个watcher  数据变化后应该让watcher从新执行\n        let watcher = new Watcher(this, exprOrFn, cb, { ...options, user: true });\n        if (options.immediate) {\n            cb(); // 如果是immdiate应该立刻执行\n        }\n    }\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\n// ?:匹配不捕获 匹配 但是不在捕获结果组中\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // </my:xx>\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的    aaa=\"aaa\"  a='aaa'   a=aaa\n// const attribute = /^\\s*([^\\s\"'<>\\/=]+)(\\s*(=)\\s*(\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的  测试用 展示所有捕获组\n\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >    >   <div></div>  <br/>\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\n// 数据结构 树、栈、链表、队列、\nexport function parseHTML(html) {\n    function createASTElement(tagName, attrs) {\n        return {\n            tag: tagName, // 标签名\n            type: 1, // 元素类型\n            children: [], // 孩子列表\n            attrs, // 属性集合\n            parent: null // 父元素\n        }\n    }\n    let root;\n    let currentParent;\n    let stack = [];\n    function start(tagName, attrs) { // 创建一个元素 作为根元素\n        let element = createASTElement(tagName, attrs);\n        if (!root) {\n            root = element;\n        }\n        currentParent = element; // 当前解析的标签 保存起来\n        stack.push(element); // 将生产的ast元素放到栈中\n    }\n\n    // <div> <p></p> hello</div>    currentParent=p\n    function end(tagName) { // 在结尾标签处 创建父子关系\n        let element = stack.pop(); // 取出栈中的最后一个\n        currentParent = stack[stack.length - 1];\n        if (currentParent) { // 在闭合时可以知道这个标签的父亲是谁\n            element.parent = currentParent;\n            currentParent.children.push(element);\n        }\n    }\n    function chars(text) {\n        text = text.trim();\n        if (text) {\n            currentParent.children.push({\n                type: 3,\n                text\n            })\n        }\n    }\n\n    while (html) { // 只要html不为空字符串就一直解析\n        // console.log(html)\n        let textEnd = html.indexOf('<');\n        // console.log(textEnd)\n        if (textEnd == 0) {\n            // 肯定是标签\n            const startTagMatch = parseStartTag(); // 开始标签匹配的结果 处理开始\n\n            // 得到结果 当前标签\n            // attrs: Array(2)\n            // 0: { name: \"id\", value: \"app\" }\n            // 1: { name: \"style\", value: \"color:red\" }\n            // length: 2\n            // tagName: \"div\"\n\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs);\n                continue;\n            }\n            const endTagMatch = html.match(endTag);\n            if (endTagMatch) { // 处理结束标签\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]); // 将结束标签传入 \n                continue;\n            }\n        }\n        let text;\n        if (textEnd > 0) { // 当前下来标识为文本 截取文本 是处理文本\n            text = html.substring(0, textEnd)\n        }\n        if (text) { //  处理文本 删除文本\n            advance(text.length);\n            chars(text);\n        }\n\n    }\n\n    function advance(n) { // 将字符串进行截取操作 在更新html内容\n        html = html.substring(n)\n    }\n\n    function parseStartTag() {\n        const start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length); // 删除开始标签\n            // 如果直接是闭合标签了 说明没有属性\n            let end, attr;\n            // 不是结尾标签 能匹配到属性\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                // console.log(attr)\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\n                advance(attr[0].length); // 去掉当前属性\n            }\n            if (end) { // >  删除匹配到的结束标签\n                advance(end[0].length);\n                return match;\n            }\n        }\n    }\n\n    return root;\n}","// 编写<div id=\"app\" style=\"color:red\"> hello {{name}} <span>hello</span></div>\n\n// _c 生成节点\n// _v 虚拟dom\n// 结果:render(){\n//    return _c('div',{id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('span',null,_v('hello')))\n//}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n//  语法层面的转义\nfunction genProps(attrs) { //  id   \"app\"     / style  \"fontSize:12px;color:red\"\n    let str = '';\n    for (let i = 0; i < attrs.length; i++) {\n        let attr = attrs[i];\n        if (attr.name === 'style') {\n            let obj = {}; // 对样式进行特殊的处理 \n            attr.value.split(';').forEach(item => {\n                let [key, value] = item.split(':');\n                obj[key] = value;\n            });\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\n    }\n    return `{${str.slice(0, -1)}}`;\n}\nfunction gen(node) {\n    if (node.type == 1) {\n        return generate(node); // 生产元素节点的字符串\n    } else {\n        let text = node.text; // 获取文本\n\n        // 如果是普通文本 不带{{}}\n        if (!defaultTagRE.test(text)) {\n            return `_v(${JSON.stringify(text)})` // _v('hello {{ name }} world {{msg}} aa')   => _v('hello'+_s(name) +'world' + _s(msg))\n        }\n\n        // 带 {{}} 情况\n        let tokens = []; // 存放每一段的代码\n        // 修改正则匹配后的索引\n        let lastIndex = defaultTagRE.lastIndex = 0; // 如果正则是全局模式 需要每次使用前置为0\n        let match, index; // 每次匹配到的结果\n\n        while (match = defaultTagRE.exec(text)) {\n            // console.log(match)\n            index = match.index; // 保存匹配到的索引\n            // console.log(index)\n            if (index > lastIndex) {\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`);\n            lastIndex = index + match[0].length;\n        }\n        if (lastIndex < text.length) {\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}\nfunction genChildren(el) {\n    const children = el.children;\n    if (children) { // 将所有转化后的儿子用逗号拼接起来\n        return children.map(child => gen(child)).join(',')\n    }\n}\nexport function generate(el) {\n    let children = genChildren(el);// 儿子的生成\n    let code = `_c('${el.tag}',${\n        el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'\n        }${\n        children ? `,${children}` : ''\n        })`;\n    // console.log(code)\n    return code;\n}","import { parseHTML } from \"./parse\";\nimport { generate } from \"./generate\";\n\n\nexport function compileToFunctions(template) {\n    // debugger\n    // 生成 ast 树\n    let ast = parseHTML(template)\n\n    // 通过 ast 树生成代码\n    let code = generate(ast)\n    // console.log(code)\n\n    // 4.将字符串变成函数 限制取值范围 通过with来进行取值 \n    // 稍后调用render函数就可以通过改变this 让这个函数内部取到结果了\n    // 改变 this 指向\n    let render = new Function(`with(this){return ${code}}`);\n\n    return render;\n\n}","export function patch(oldVnode, vnode) {\n    // 将虚拟节点转化成真实节点\n    let el = createElm(vnode); // 产生真实的dom \n    let parentElm = oldVnode.parentNode; // 获取老的app的父亲 =》 body\n    parentElm.insertBefore(el, oldVnode.nextSibling); // 当前的真实元素插入到app的后面\n    parentElm.removeChild(oldVnode); // 删除老的节点\n    return el\n}\n\nfunction createElm(vnode) {\n    let { tag, children, key, data, text } = vnode;\n    // 如果是元素\n    if (typeof tag == 'string') { // 创建元素 放到vnode.el上\n        vnode.el = document.createElement(tag);\n        // 只有元素才有属性\n        updateProperties(vnode);\n\n        children.forEach(child => { // 遍历儿子 将儿子渲染后的结果扔到父亲中\n            vnode.el.appendChild(createElm(child));\n        })\n    } else { // 创建文本 放到vnode.el上\n        vnode.el = document.createTextNode(text);\n    }\n    return vnode.el;\n}\n\n// vue 的渲染流程 =》 先初始化数据 =》 将模板进行编译 =》 render函数 =》 生成虚拟节点 =》 生成真实的dom  =》 扔到页面上\n\nfunction updateProperties(vnode) {\n    let el = vnode.el;\n    let newProps = vnode.data || {};\n    for (let key in newProps) {\n        if (key == 'style') { // {color:red}\n            for (let styleName in newProps.style) {\n                el.style[styleName] = newProps.style[styleName]\n            }\n        } else if (key == 'class') {\n            el.className = el.class;\n        } else {\n            el.setAttribute(key, newProps[key]);\n        }\n    }\n}","import { pushTarget, popTarget } from \"./dep\";\nimport { nextTick } from \"../util\";\n\nlet id = 0;\nclass Watcher { // vm.$watch\n    // vm实例\n    // exprOrFn  vm._update(vm._render())\n    constructor(vm, exprOrFn, cb, options) {\n        this.vm = vm;\n        this.exprOrFn = exprOrFn;\n        this.cb = cb;\n        this.options = options;\n        this.user = options.user; // 这是一个用户watcher\n\n        this.id = id++; // watcher的唯一标识\n        this.deps = []; // watcher记录有多少dep依赖他\n        this.depsId = new Set();\n        if (typeof exprOrFn == 'function') {\n            this.getter = exprOrFn\n        } else {\n            this.getter = function () { // exprOrFn 可能传递过来的是一个字符串a\n                // 当去当前实例上取值时 才会触发依赖收集\n                let path = exprOrFn.split('.'); // ['a','a','a']\n                let obj = vm;\n                for (let i = 0; i < path.length; i++) {\n                    obj = obj[path[i]]// vm.a   // vm.a.a\n                }\n                return obj;\n            }\n        }\n        // 默认会先调用一次get方法 ，进行取值 将结果保留下来\n        this.value = this.get(); // 默认会调用get方法 \n    }\n    addDep(dep) {\n        let id = dep.id;\n        if (!this.depsId.has(id)) {\n            this.deps.push(dep);\n            this.depsId.add(id);\n            dep.addSub(this)\n        }\n    }\n    get() {\n        // Dep.target = watcher\n        pushTarget(this); // 当前watcher实例\n        let result = this.getter(); // 调用exprOrFn  渲染页面 取值（执行了get方法）  render方法 with(vm){_v(msg)}\n        popTarget(); //渲染完成后 将watcher删掉了\n        return result\n    }\n    run() {\n        let newValue = this.get(); // 渲染逻辑\n        let oldValue = this.value;\n        this.value = newValue; // 更新一下老值\n        if (this.user) {\n            this.cb.call(this.vm, newValue, oldValue);\n        }\n    }\n    update() {\n        // 这里不要每次都调用get方法 get方法会重新渲染页面\n        queueWatcher(this); // 暂存的概念\n        // this.get(); // 重新渲染\n    }\n}\nlet queue = []; // 将需要批量更新的watcher 存到一个队列中，稍后让watcher执行\nlet has = {};\nlet pending = false;\nfunction flushSchedulerQueue() {\n    queue.forEach(watcher => {\n        watcher.run();\n        if (!watcher.user) {\n            watcher.cb()\n        }\n    });\n    queue = [];\n    has = {};\n    pending = false;\n}\nfunction queueWatcher(watcher) {\n    const id = watcher.id; // 对watcher进行去重\n    if (has[id] == null) {\n        queue.push(watcher); // 并且将watcher存到队列中\n        has[id] = true;\n        // 等待所有同步代码执行完毕后在执行\n        if (!pending) { // 如果还没清空队列，就不要在开定时器了  防抖处理 \n            nextTick(flushSchedulerQueue);\n            pending = true;\n        }\n    }\n}\n\nexport default Watcher\n\n// 在数据劫持的时候 定义defineProperty的时候 已经给每个属性都增加了一个dep\n\n// 1.是想把这个渲染watcher 放到了Dep.target属性上\n// 2.开始渲染 取值会调用get方法,需要让这个属性的dep 存储当前的watcher\n// 3.页面上所需要的属性都会将这个watcher存在自己的dep中\n// 4.等会属性更新了 就重新调用渲染逻辑 通知自己存储的watcher来更新","import { patch } from \"./vdom/patch\";\nimport Watcher from \"./observer/watcher\";\n\n\nexport function lifecycleMixin(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this;\n        // console.log(vm.$el)\n        // 用新元素替换旧的\n        vm.$el = patch(vm.$el, vnode)\n    }\n}\n\n\nexport function mountComponent(vm, el) {\n\n    vm.$el = el;\n    // 调用render方法去渲染 el属性\n    // 先调用render方法创建虚拟节点，在将虚拟节点渲染到页面上\n    callHook(vm, 'beforeMount')\n    let updateComponent = () => {\n        vm._update(vm._render()); // 渲染 、 更新\n    }\n    // 这个watcher是用于渲染的 目前没有任何功能  updateComponent()\n\n    // 初始化就会创建watcher\n    let watcher = new Watcher(vm, updateComponent, () => {\n        callHook(vm, 'updated')\n    }, true); // 渲染watcher 只是个名字\n\n    // ??\n    // setTimeout(() => {\n    //     watcher.get()\n    //     // vm._update(vm._render());\n    // }, 2000);\n\n    // 要把属性 和 watcher绑定在一起 \n\n    callHook(vm, 'mounted');\n}\n\n\nexport function callHook(vm, hook) {\n    // handlers 是个数组\n    const handlers = vm.$options[hook]; // vm.$options.created  = [a1,a2,a3]\n    if (handlers) {\n        for (let i = 0; i < handlers.length; i++) {\n            handlers[i].call(vm); // 更改生命周期中的this\n        }\n    }\n}","import { initState } from \"./state\";\nimport { compileToFunctions } from \"./compiler/index\";\nimport { mountComponent, callHook } from \"./lifecycle\";\nimport { mergeOptions } from \"./util\";\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        // this 指向 new 出来的实例\n        const vm = this;\n        // 需要将用户自定义的options 和全局的options做合并\n        // 子类 或者 vue 会调用 所以使用  constructor 调用\n        // 合并到 实力上 可能是 组件 可能是 vue\n        vm.$options = mergeOptions(vm.constructor.options, options);\n        callHook(vm, 'beforeCreate')\n\n        initState(vm); // 初始化状态\n        callHook(vm, 'created')\n\n        if (vm.$options.el) { // 挂载逻辑\n            vm.$mount(vm.$options.el)\n        }\n    }\n\n    Vue.prototype.$mount = function (el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el)\n        vm.$el = el\n\n        if (!options.render) {\n            // 没有render 将 template 转化为render\n            let template = options.template\n            if (!template && el) {\n                // 没有 template 将给定el 作为 template\n                template = el.outerHTML\n            }\n            // 将 dom 字符串 编译为render 函数\n            const render = compileToFunctions(template)\n            // console.log(render)\n            options.render = render\n        }\n        mountComponent(vm, el)\n    }\n}","export function renderMixin(Vue) {\n    // 用对象来描述dom的解构 虚拟节点\n    Vue.prototype._c = function () { // 创建虚拟dom元素\n        return createElement(...arguments);\n    }\n    Vue.prototype._s = function (val) { // stringify 表示对象 将对象展示为 string 字符串输出\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\n    }\n    Vue.prototype._v = function (text) { // 创建虚拟dom文本元素\n        return createTextVnode(text);\n    }\n    Vue.prototype._render = function () { // _render = render\n        const vm = this;\n        // ?\n        const render = vm.$options.render;\n        // console.log(render())\n        let vnode = render.call(vm);\n        // console.log(vnode);\n        // debugger\n        return vnode;\n    }\n}\n// _c('div',{},_v(),_c())\nfunction createElement(tag, data = {}, ...children) {\n    return vnode(tag, data, data.key, children)\n}\nfunction createTextVnode(text) {\n    return vnode(undefined, undefined, undefined, undefined, text);\n}\n// 用来产生虚拟dom的\nfunction vnode(tag, data, key, children, text) {\n    return {\n        tag,\n        data,\n        key,\n        children,\n        text\n    }\n}\n","import { mergeOptions } from \"../util\";\n\nexport function initGlobalApi(Vue) {\n    Vue.options = {}; // Vue.components Vue.diretive \n    Vue.mixin = function (mixin) {\n        // 合并对象  （我先考虑生命周期） 不考虑其他的合并 data computed watch\n        this.options = mergeOptions(this.options, mixin);\n    }\n\n    // Vue.options, options\n    // 用户 new Vue({created(){}})\n}","import { initMixin } from './init'\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./vdom/index\";\nimport { initGlobalApi } from './global-api/index'\nimport { stateMixin } from './state'\n\n\n\nfunction Vue(options) {\n    // 组件初始化入口\n    this._init(options)\n}\n\n// 写成插件对原型进行扩展\ninitMixin(Vue) // init\nlifecycleMixin(Vue); // 混合生命周期 渲染 _updata\nrenderMixin(Vue); // _render\n\nstateMixin(Vue);\n\n// 静态方法 Vue.component Vue.directive Vue.extend Vue.mixin ...\n\ninitGlobalApi(Vue);\n\nexport default Vue"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","inserted","ob","__ob__","slice","observeArray","defineProperty","target","key","value","enumerable","configurable","proxy","vm","data","get","set","newvalue","LIFECYCLE_HOOKS","strats","parentVal","childValue","mergeHook","concat","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","callbacks","pending","flushCallbacks","length","cb","shift","timerFunc","Promise","resolve","then","MutationObserver","observe","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","nextTick","push","id","Dep","subs","addDep","watcher","console","log","update","pushTarget","popTarget","Observer","isArray","__proto__","walk","item","keys","defineReactive","childDep","dep","depend","newValue","notify","initState","opts","$options","props","initData","computed","watch","_data","call","stateMixin","Vue","$nextTick","$watch","exprOrFn","Watcher","user","immediate","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","attrs","tag","type","children","root","currentParent","stack","start","element","end","pop","chars","text","trim","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","i","obj","split","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","join","genChildren","el","map","code","compileToFunctions","template","ast","render","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","createElement","updateProperties","appendChild","newProps","styleName","style","className","setAttribute","deps","depsId","Set","getter","path","has","add","addSub","oldValue","queueWatcher","queue","flushSchedulerQueue","run","lifecycleMixin","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_s","val","_v","createTextVnode","undefined","initGlobalApi","mixin"],"mappings":"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"}